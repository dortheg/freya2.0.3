# How to build the LLNL fission library
# -------------------------------------
# Jerome Verbeke <verbeke2@llnl.gov>
# 07/16/2014
#
# pre-requisite: gfortran 4.4.0 or higher (for interfaces, Fortran 2003)
#
# to use specific compiler, FC=... CC=... CXX=... cmake ...


# create a separate build directory for files generated by cmake system
# (on LLNL can make system specific directory ${SYS_TYPE}-build)
mkdir ../build
cd ../build

# compile options
cmake ../src; make                                # regular build
cmake -DCMAKE_BUILD_TYPE=Debug ../src; make       # debug build
cmake -DCMAKE_BUILD_TYPE=Release ../src; make     # release build
cmake -DSTATIC:BOOL=ON ../src; make               # static library (default is dynamic)
cmake -DLINT:BOOL=ON ../src; make VERBOSE=1       # check if code compiles (strict compilation rules)
cmake -DNEWXNORMAL:BOOL=ON ../src; make VERBOSE=1 # use mcnp/mpi compatible implementation of xnormal function
cmake -DPROF:BOOL=ON ../src; make VERBOSE=1       # performance profile of code

# installs library in lib
make install

# to apply copyright notices (within src subdirectory)
cmake -DCOPYRIGHT:BOOL=ON .                    # apply copyright notices to all files
cmake -DCOPYRIGHT:BOOL=ON -DFORLANL:BOOL=ON .  # prepare files for LANL

# delete CMakeCache.txt between 2 invocations of cmake. Otherwise, cmake variables 
# in CMakeCache.txt will be re-used. For compiler change, `rm -rf *`

# How to test the library
# -----------------------
    cd ../regr; run_test
